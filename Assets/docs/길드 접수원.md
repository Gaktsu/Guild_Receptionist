## 1) 제품/운영 범위

- 목표 플랫폼: PC
    
- 목표 플레이 타임(1회차): 2시간
    
- 세션 구조: 캠페인(100일)
    
- 저장/로드: 하루가 끝날때마다 자동 저장하는 방식, 따로 직접 저장 기능은 X
    
- 난이도 선택: 난이도별 변화 요소
    

## 2) 기술 스택/제약

- 엔진/프레임워크: Unity
    
- 언어: C#
    
- 타겟 해상도/비율: 16:9
    
- 파일 구조 선호: 
	- 폴더 규칙 : 기능 기준으로 나눌 것
	  - ex :  Guild/
			Quest/
			Event/
			Time/
			Player/
	- 네이밍 규칙
	  - ### 클래스 네이밍
		 - 명사 + 역할 
			 - `QuestGenerator`   
			 - `GuildManager`
			 - `TimeSystem`
	- ### 인터페이스
		- `I` 접두어 사용
		- `IQuestCondition`
		- `IEventTrigger`
	- ### ScriptableObject
		- `SO_QuestData`
		- `SO_EventData`
	- ### 매니저 남발 금지 규칙
		- Manager는 시스템 단위에서만 허용
		- 모든 클래스에 Manager 붙이지 말 것

- 데이터 포맷:
	- ### A. 콘텐츠 정의(정적) → ScriptableObject
	- ### B. 실행 결과/진행 상태(동적) → JSON

- 배포 방식: 스팀/스토어

## 3) UX/UI 방향(너 게임은 UI 중심이라 특히 중요)

- 기본 화면(접수 데스크)에서 하는 행동 목록
    - **정보 받기** (NPC/소식/제보/문서)
	- **정보 보관함 열기** (오늘 수집한 정보 리스트/필터)
	- **퀘스트 작성하기** (퀘스트 보드로 이동)
	- **오늘 제출/마감** (작성한 퀘스트 확정)
	- **일지/기록 보기** (지난날 결과/평판 변화) 
	- **길드 상태** (신뢰도/평판/등급/예산)
	- **다음 날로 넘기기** (End Day)

- 하루 흐름에서 UI 단계(버튼/패널) 순서
    - **Step 1 — Day Start**
		- 오늘의 키 이슈/공지 1줄
		- 주요 수치(평판, 신뢰도, 예산) 표시
		- 버튼: `오늘 시작`
	- **Step 2 — 정보 수집**
		- 정보 카드가 순서대로 뜸(6개)
		- 각 정보 카드마다 선택지:
		    - `기록하기` / `폐기` / `추가 조사(비용)`(선택)
			- `추가 조사`는 조사 과정을 한 번에 끝내지 않기
				한 번 누르면 끝이 아니라 “단계형”으로 두기
​
				예 : 
					1차 조사: AP 1 소모, 신뢰도 +10, 텍스트: “대략적인 위치가 파악되었습니다.”

					2차 조사: 추가 AP 1, 신뢰도 +20, “현지 모험가들의 증언이 확보되었습니다.”

					3차 정찰: AP 2, 신뢰도 +30, “정찰 보고서 도착, 세부 정보 확정.”
		- 버튼: `수집 완료`
	- **Step 3 — 퀘스트 작성**
		- 좌측: 정보 보관함(필터/검색)
		- 우측: 퀘스트 편집기
		- 하단: `초안 생성` / `검증` / `제출 목록에 추가`
	- **Step 4 — 제출/마감**
		- 오늘 제출할 퀘스트 목록(최대 N개)
		- 각 퀘스트는 “리스크/보상/신뢰도 소모”가 보임
		- 버튼: `오늘 마감`
	- **Step 5 — 결과/정산**
		- 성공/실패 결과 카드 + 변화 로그
			- 이유 Top 3 (예시)
			    - “정보 신뢰도 낮음(-15)”
			    - “파티 탐색 부족(-10)”
			    - “정찰 수행(+20)”
		- 다음날 영향(치안/평판/예산 변화) 표기
		- 버튼: `다음 날`
		- 정보 표시 방식(카드/리스트/대화창/지도)
		- 퀘스트 작성 UI: 템플릿 선택? 직접 입력? 자동 추천?
		- 피드백 UI: 성공/실패 로그, 신뢰도 변화, 평판 변화

- 정보 표시 방식(카드/리스트/대화창/지도) 
	- ### 정보 UI 추천: 카드 + 태그 + 신뢰도
		- 정보 한 장은 아래 필드를 갖는 카드로:
			- **제목** (한 줄)
			- **출처**(NPC/문서/소문)
			- **지역 태그** (예: 북부/하수구/상단가)
			- **유형 태그** (몬스터/질병/도적/분쟁)
			- **신뢰도(0~100)** 또는 ★1~5
			- **핵심 내용(2~3줄)**
			- 버튼: `퀘스트에 붙이기`
	- ### 리스트/검색은 “보관함”에서만
		- 리스트: 체크박스 + 필터(지역/태그/신뢰도/오늘/지난날)
		- 카드 클릭하면 오른쪽에 “상세 패널(슬라이드)”로 확장
	- ### 지도는 “메인 UI가 아니라 보조”
		- 지도는 항상 열어두지 말고
		- `지역 필터/핀 보기` 같은 보조툴로만

- 퀘스트 작성 UI
	- **템플릿 기반 + 자동 추천 + (고급) 직접 편집**
		- ### 퀘스트 작성 화면 구성(권장)
			- **왼쪽: 정보 보관함**
				- 드래그/핀으로 “퀘스트 재료 슬롯”에 넣기
			- **가운데: 템플릿 선택**
				- 템플릿은 6~10개만 (초기에는)
				    - 처치 / 조사 / 호위 / 회수 / 방역 / 협상 등
				- 템플릿 선택하면 빈칸(슬롯)이 보임  
				    예: `대상( )` `장소( )` `위험도( )` `마감( )`
			- **오른쪽: 결과 미리보기**
				- 퀘스트 공문처럼 최종 문장 미리보기
				- 보상/리스크/신뢰도 영향이 실시간 표시
		- ### 자동 추천 방식(UX)
		- 정보 1개를 선택하면 “추천 템플릿 3개”가 뜸
		- 정보 2~3개 묶으면 “조합 추천”이 뜸  
		    (예: ‘독’ + ‘마을’ → 방역/조사 추천)
		    
		- ### 직접 입력은 “고급 토글”
			- 기본은 슬롯 채우기
			- 상단에 `고급 편집` 토글로 문장 수정 허용
				- 하지만 “핵심 파라미터”는 유지해야 밸런싱이 쉬움

- 피드백 UI
	- ### 결과 UI는 3층 구조
		- **(1) 큰 결과 카드**
			- 성공/실패/부분 성공
			- 한 줄 요약: “당신의 퀘스트는 과대평가됐다” 같은 내러티브
		- **(2) 변화 요약 바(숫자)**
			- 평판 +3
			- 신뢰도 -5
			- 예산 +120G
			- 피해/부작용(있으면)
		- **(3) 상세 로그(접기/펼치기)**
			- 왜 성공/실패했는지 “근거”를 보여줌  
			    예:
			    - 정보 신뢰도 40%였음
			    - 위험도 설정이 실제보다 낮았음
			    - 마감이 촉박했음
## 4) 코어 루프 디테일
- “하루에” 플레이어가 할 수 있는 액션 수(행동 포인트)
- 정보 획득 채널: 
	- ### ① 게시판/공문(Official)
		- 특징: 신뢰도 높음, 급하지 않음, 내용이 딱딱함
		- 장점: 실패가 적음
		- 단점: 보상이 보통
	- ### ② 민간 의뢰/소문(Rumor)
		- 특징: 양 많고 자극적, 거짓/과장 섞임
		- 장점: 대박 이벤트가 섞임(고보상)
		- 단점: 함정이 많음(실패/패널티)
	- ### ③ 모험가 보고(Adventurer Report)
		- 특징: 현장 기반, 지역/몬스터/상황이 구체적
		- 장점: 퀘스트로 바로 변환하기 쉬움
		- 단점: 편향(자기 실수 감추기), 과장 가능
	- ### ④ 길드 내부 첩보/정찰(Scout/Intel)
		- 특징: 액션(비용/시간) 들여 얻는 정보
		- 장점: “검증” 역할. 특정 사건의 신뢰도/세부사항을 확정
		- 단점: 행동 포인트/자원 소모
	- ### + (가끔) ⑤ 긴급 속보(Event Burst)
		- 특정 Day 구간에 터지는 이벤트성 정보 묶음
		- 정보 처리: 그냥 저장? 분류? 신뢰도 평가? 교차검증?
		- 퀘스트 생성: 기본은 반자동 + 고급 편집
		- 퀘스트 배포: 하루 4번
	- ### 행동 포인트(Action Point) 시스템
		- 하루 시작 시 행동 포인트 X 지급 (권장: 4~6)
		    
		- 하루 종료 시 남은 포인트는 소멸
		    
		- 다음 행동에 사용됨:
		    
		
		|행동|소모 AP|
		|---|---|
		|정보 추가 조사|1|
		|정찰 실행|2|
		|사건 연결 확정|1|
		|위험도 재조정(Amplify/Downplay)|1|
		|정책 발동|1~2|
		
		---
		
		### 설계 원칙
		
		- 퀘스트 발행 자체는 AP 소모 없음
		    
		- 검증/개입/조작에 AP 사용
		    
		- AP는 전략적 선택 압박용
		    
		
		---
		
		# 🎯 중요한 점
		
		AP를 “퀘스트 수 제한”이랑 겹치게 만들면 안 돼.
		
		이미:
		
		- 하루 퀘스트 최대 4개 있음
		    
		
		그러니까 AP는:
		
		퀘스트 수를 제한하는 게 아니라  
		퀘스트의 ‘품질’을 조정하는 자원
		
		이어야 한다.
		
		---
		
		# 🔥 권장 수치
		
		초기 밸런스:
		
		- 하루 AP = 5
		    
		- 정보 6~8개
		    
		- 퀘스트 4개
		    
		
		→ 모든 걸 다 검증할 수 없게 만드는 게 핵심
		
		---
		
		# 📌 그리고 한 가지 더
		
		AP는 **전략 자원과 연결 가능**해.
		
		예:
		
		- “조사실 업그레이드” → 하루 AP +1
		    
		- “행정 효율 개선” → 특정 행동 AP -1
		    
		
		이렇게 연결하면 시스템이 유기적으로 묶인다.
- 퀘스트 생성: 완전 수동
- 퀘스트 배포: 하루 4개
## 5) 시스템 구성 요소(모듈화용)
- 월드 상태: 마을/지역/세력/경제/치안 같은 게 변함
- 길드 내부: 등급, 예산, 인력, 규정
- 플레이어 성장: 플레이어는 성장하지 않음
- NPC/모험가 시스템: 존재 여부, 등급, 성향, 신뢰도
- 파견 결과 처리 방식: 
	- ### ✅ 기본 퀘스트 = 스탯 비교 + 확률(가볍게)
		- 대부분 빠르게 처리해서 루프를 유지   
		- 억까 방지 위해 “최소 성공 보정”을 둠(예: 요구치 크게 넘으면 실패 확률 5% 이하)
	- ### ✅ 이벤트성 퀘스트 = 시뮬레이션(단계형)
		- 사건이 굴러가고, 다음 날 후속 정보가 생기고, 연쇄 퀘스트로 이어짐
	- ### ✅ 정책/규정 = 룰 기반 스위치
		- “신뢰도 40 미만은 발행 금지”		    
		- “긴급 사건은 정찰 없이 발행 금지”  
## 6) 정보(Info) 시스템 상세

- 정보의 속성: 카테고리, 출처, 신뢰도, 긴급도, 지역, 관련 키워드
    
- 거짓 정보 존재 X
    
- 정보는 소모되는가?

	- # 정보 소모: “원본은 유지 + 활용은 소모”
	
	- ## ✅ 설계: Info는 2층 구조
		- **Raw Info(원본)**: 절대 사라지지 않음(기록/아카이브)
		- **Lead(활용권/리드)**: 퀘스트에 붙일 때 소모되는 “사용권”
	
	- ### 흐름
		1. 하루에 정보가 들어옴(원본 저장)
		2. 그 정보를 “조사/정찰/확인 요청”하면 → **Lead가 생성/강화**
		3. 퀘스트를 만들 때는 **Lead를 붙임**(소모)
		4. 원본은 남아 있으니 “기록/연결/엔딩 계산”에 계속 영향
	
		이렇게 하면:
		- “정보를 썼는데 완전히 사라져서 기억이 끊기는” 문제도 없고   
		- “무한 재사용으로 같은 정보로 똑같은 퀘스트 뽑는” 문제도 막아.

	- ## Lead가 소모되는 규칙(권장)
		- **퀘스트 1개 발행에 Lead 1개 소모**
			- 한 원본 정보는 하루에 1회만 Lead로 변환 가능(스팸 방지)
			- 같은 사건(아래 사건 그룹)에서 Lead를 여러 개 만들 수 있음


- # 정보 간 관계: “사건(Incident) 묶음”을 중심으로 연결

	- 너가 원하는 “정보 묶음 추천 + 편집”을 가장 깔끔하게 만들려면, 정보끼리 직접 복잡하게 연결하기보다 **중간에 ‘사건’ 개체를 두는 게 정답**이야.
	
	- ## ✅ 구조
		- Info는 각각 “단서”
		- 단서들은 하나의 **Incident(사건)** 에 속함
		- 사건은 시간이 흐르며 **페이즈(발단→악화→결말)** 로 진행

	- ### 필드 예시(개념)
		- `Info.incidentHintId` (처음엔 비어있을 수 있음)
		- `Incident.id, region, threatType, severity, phase, relatedKeywords`
		- `Incident.infoIds[]` (연결된 단서 목록)

	- ## “연결”은 어떻게 만들어지나?
	
		- 너는 거짓 정보가 없으니까, 연결은 퍼즐처럼 어렵게 만들 필요가 없어. 대신 **운영 선택**이 되도록 설계하면 돼.

	- ### 연결 생성 방식 3단계(추천)
		- 1. **자동 후보 추천(소프트 링크)**  
		    키워드/지역/카테고리가 겹치면 “같은 사건일 가능성”을 보여줌  
		    (확정 아님)
		    
		- 2. **플레이어가 합치기/분리(하드 링크 확정)**  
		    플레이어가 “이건 같은 사건”을 누르면 Incident가 생성되거나 병합됨
		    
		- 3. **정찰/확인 요청으로 확정(검증 액션)**  
		    액션 포인트를 써서 연결을 확정하거나 세부 정보를 추가함
	    
		이러면:
		- 플레이어가 “사건을 어떻게 묶느냐”가 전략이 되고
		- 묶는 순간 이벤트성 퀘스트로 커지거나,
		- 쪼개서 안전한 일반 퀘스트 여러 개로 가거나 선택이 생겨.
    
- 플레이어가 정보 내용을 “편집/왜곡”할 수 있음
	- # 플레이어의 “편집/왜곡”과 사건 연결의 궁합 (엔딩 분기용)

		- 거짓 정보는 없지만 플레이어가 왜곡 가능하니까,  
		왜곡은 **원본을 바꾸는 게 아니라 “발행 문서(Quest Brief)”를 바꾸는 것**으로 처리하는 게 안정적이야.

	- ## ✅ 원칙
	
		- Raw Info: 진실(불변)
		    
		- Quest Brief(퀘스트 설명/요구사항/위험도): 플레이어가 편집 가능
		    
		- 편집 로그: 남는다(엔딩 계산/평판/규정 위반 체크)
	    
	
	- ## 왜곡을 시스템화하는 방법(권장 2종)
	
		- **강조(Amplify)**: 위험/긴급/보상을 부풀림 → 빠른 해결 or 큰 사고
			
		- **완화(Downplay)**: 위험/긴급을 낮춤 → 성공률↑처럼 보이지만, 후폭풍(사건 악화) 가능
	    
	
	- 이게 Incident의 severity/phase에 영향을 주도록 만들면,  
	 왜곡이 “서사”로 이어진다.
    

## 7) 퀘스트(Quest) 시스템 상세

- 퀘스트 타입 목록: 토벌/조사/호위/배송/외교/정화/구조 등
    
- 퀘스트 필드: 난이도, 위험도, 보상, 제한시간, 지역, 요구 등급
    
- 등급 체계: F~S 기준으로 산정
    
- 퀘스트 실패/성공의 결과: 월드 변화, 평판 변화, 후속 이벤트
    
- 퀘스트 생성 규칙
	- ## 1) 기본 철학: Info는 “태그 묶음”으로 바꾼다
	
		- 각 Info에는 최소 이 태그들이 붙어있다고 가정:
		
			- `threat` (몬스터/도적/역병/실종/정치/오염 등)
			    
			- `intent` (피해 발생/예방/회수/협상/정리)
			    
			- `location` (지역)
			    
			- `urgency` (긴급도 0~100)
			    
			- `severity` (심각도 0~100)
			    
			- `credibility` (신뢰도 0~100) ※ 거짓정보는 없지만 “구체성/확실성” 정도로 쓰면 됨
			    
		
		- 퀘스트 타입은 태그 조합으로 결정하고,  
		 	난이도/위험도/보상/제한시간은 수치(urgency/severity/credibility)로 계산한다.

	- ## 2) 퀘스트 타입 결정 규칙(룰 + 우선순위)
	
		- Info 하나(또는 묶음)에서 아래 룰을 위에서부터 적용해서 타입을 정해.
	
			- ### A. “상태가 진행 중 + 긴급”이면 → 구조/정화/호위 우선
			
				1. `threat=역병/오염/독` → **정화**
				    
				2. `intent=구조` 또는 키워드(“실종/갇힘/부상자”) → **구조**
				    
				3. 키워드(“행렬/수송/위험 구간 통과”) → **호위**
				    
				4. 키워드(“물자 부족/약품/봉인물”) → **배송**
		    
		
			- ### B. “원인/정체 불명”이면 → 조사
			
				1. `credibility 낮음(예: <50)` 또는 `원인 미상` → **조사**
		    
		
			- ### C. “대상이 명확하고 제거가 목적”이면 → 토벌
			
				1. `threat=몬스터/도적` AND 키워드(“소굴/목격/피해 반복”) → **토벌**
		    
		
			- ### D. “세력/협상/갈등”이면 → 외교
			
				1. `threat=정치/분쟁/조약/귀족/상단` → **외교**
	
		- 이렇게 하면 플레이어가 보기에도 “아 그래서 이 타입이구나”가 됨.

	- ## 3) 묶음(클러스터)일 때의 규칙: “메인 타입 1개 + 서브 타입 0~1개”

		너는 반자동 묶음 추천이니까, Info를 2~3개 묶으면 사건이 커져야 재미있어.
		
		- ### 메인 타입 선택
			
			- 묶음 내에서 **severity가 가장 높은 threat**를 메인으로
			    
			- 또는 “진행을 막는 데 필요한 행동”이 메인  
			    (예: 역병이면 정화가 메인)
			    
		
		- ### 서브 타입 추가(선택)
		
			- 조사가 필요한데 동시에 위협이 있으면: **조사 + 호위**
			    
			- 토벌인데 원인/위치가 불명확하면: **조사 → 토벌** (연쇄 퀘스트)
			    
			- 외교인데 위험 지역 방문이면: **외교 + 호위**
		    
		
		서브 타입은 UI에서 “추가 요구사항(옵션)”처럼 보여주면 좋아. 
		예: “조사(메인) / 호위(옵션)” 체크박스

	- ## 4) 난이도·위험도·보상·제한시간 산정(간단 공식)

		복잡한 수학 말고, 테이블/점수로 가면 제작이 빨라.
	
		- ### 점수 계산
	
			- `base = round(severity/10)` → 0~10
				
			- `urg = round(urgency/20)` → 0~5
				
			- `clarity = round(credibility/20)` → 0~5 (높을수록 쉬움)
		
	
			- **난이도 점수**
			
				- `difficultyScore = base + urg - floor(clarity/2) + typeModifier`
		
	
			- **위험도 점수**
			
				- 토벌/정화/구조는 위험도 +1~+2
					
				- 외교/배송은 위험도 0~+1 (대신 실패 시 평판 영향 큼)
					
			
			**보상 점수**
			
				- `rewardScore = difficultyScore + riskBonus + timeBonus`
					
				- timeBonus: 제한시간 짧으면 +1~+2
			
	
		- ### 제한시간(턴 단위)
		
			- `urgency 80+` → 1~2일
				
			- `urgency 50~79` → 3~5일
				
			- `urgency <50` → 6~10일
	

	- ## 5) 등급(F~S) 산정 규칙(한 방에)
	
		난이도 점수(difficultyScore)를 등급으로 매핑.
		
		예시:
		
		- 0~2: F
			
		- 3~4: E
			
		- 5~6: D
			
		- 7~8: C
			
		- 9~10: B
			
		- 11~12: A
			
		- 13+: S
			
		
		(필요하면 SS는 이벤트 전용으로)

	- ## 6) “Info → Quest” 매핑 표(바로 쓰기)
	
		이거 하나만 문서에 넣어도 AI가 흔들릴 일이 거의 없어.
		
		- 몬스터/도적 피해 반복 → 토벌
		    
		- 실종/인명피해 진행 → 구조
		    
		- 원인 불명/단서 부족 → 조사
		    
		- 귀족/상단/세력 갈등 → 외교
		    
		- 물자/약품/봉인물 전달 → 배송
		    
		- 역병/오염/독/저주 확산 → 정화
		    
		- 위험 지역 통과, VIP, 수송 → 호위
	    

	- ## 7) “왜곡/편집”과의 연결(너 게임의 맛)
		
		플레이어가 퀘스트를 편집할 수 있다 했지?
		
		그럼 “타입 자체를 바꾸는 편집”은 너무 강력해서 밸런스가 무너질 수 있어.  
		대신 추천은 이거:
		
		- 타입은 기본적으로 유지
		    
		- 편집은 **난이도/위험도/보상/제한시간**에 영향을 주는 형태
		    
		
		예:
		
		- 위험을 낮게 써서 발행(Downplay) → 성공률은 올라가 보이지만, 실제 사건은 악화될 수 있음
		    
		- 위험을 높게 써서 발행(Amplify) → 예산/지원 더 붙어서 해결 가능, 대신 실패 시 대참사
		    

## 8) 이벤트(Story/Event) 시스템 상세

- 이벤트 종류: 질병/독/전쟁/도적/정치/축제/재난/타 종족 토벌 또는 외교/마족 간부 침입/민간인이 사망 혹은 실종되는 사례가 다발적으로 발생 등
    
- “이벤트성 퀘스트”의 정의: **새로운 분기로 넘어가는 퀘스트**
	- ### 일반 퀘스트
		- WorldState에 ± 소폭 영향
		- 단발성
		    
	- ### 이벤트성 퀘스트
		- Incident.phase를 변경
		- WorldState에 큰 영향
		- 플래그 생성
		- 후속 이벤트 확률 변경
	- # 📊 이벤트 상태 머신 (중요)

		각 이벤트는 이런 상태를 가짐:
		
		Dormant (잠복)  
		→ Triggered (발단)  
		→ Escalating (악화)  
		→ Critical (위기)  
		→ Resolved (해결)  
		→ Catastrophe (파국)
		
		플레이어가:
		
		- 성공 → 단계 하락
		    
		- 실패 → 단계 상승
		    
		- 방치 → 자동 상승
		    
		
		이 구조면  
		“만회 가능” 조건도 자연스럽게 구현됨.
    
- 이벤트의 진행 단계: 발단→악화→해결/파국 같은 페이즈가 있음 (플레이어가 실수든 고의든 잘못된 정보를 통해 큰 실패를 겪으면 악화되기 시작하지만 만회는 가능함)
    
-  이벤트 트리거 설계

	이벤트는 절대 “그냥 랜덤”이면 안 돼.
	
	- ### ❌ 나쁜 방식
	
		- Day 15 → 20% 확률로 역병 발생
	
		이러면 플레이어가 납득 못 함.
	
	- ## ✅ 추천 구조: 3단계 트리거
	
		이벤트 발생은 다음을 모두 통과해야 함:
		
		[가능 기간 체크] → [조건 체크] → [확률 보정 굴림]
	
		- ## 1단계: Day 범위
		
			이벤트마다 등장 가능한 시기만 정의.
			
			예:
			
			- 질병: Day 5~40
			    
			- 전쟁: Day 30~90
			    
			- 마족 간부: Day 50~100
			    
			
			이건 페이싱 조절용.
	
		- ## 2단계: 조건 체크 (핵심)
	
			이게 게임성을 만든다.
			
			조건 예시:
			
			### 질병 이벤트
			
			- 최근 5일간 "정화/조사" 퀘스트 실패 2회 이상  
			    OR
			    
			- 특정 지역 치안 < 40
			    
			
			### 도적 세력 확대
			
			- 토벌 퀘스트 미처리 3회  
			    OR
			    
			- 무역 배송 실패 2회
			    
			
			### 정치 갈등
			
			- 외교 퀘스트 실패
			    
			- 특정 세력 평판 < 30
			    
			
			즉,
			
			이벤트는 “플레이어의 행동 결과”로 생긴다
			
			이러면 랜덤이 아니라 책임이 된다.
	
		- ## 3단계: 확률 보정
	
			조건 충족 시:
			
			기본 발생 확률 30%
			
			하지만:
			
			- 최근 관련 실패 많으면 +20%
			    
			- 관련 성공 많으면 -15%
			    
			- 왜곡 편집 많이 했으면 +10%
			    
			
			이러면 시스템이 살아있음.
    
- 이벤트는 서로 연쇄되는가?
	- ## 간접 연쇄 (강력 추천)

		이벤트는 서로 직접 연결되지 않음.
		
		대신 모든 이벤트는 **월드 상태 수치에 영향을 줌.**
		
		예를 들어:
		
		- 질병 → 치안 -10, 경제 -15
		    
		- 도적 증가 → 치안 -20
		    
		- 전쟁 → 경제 -25, 세력 관계 -15
		    
		
		그럼
		
		치안이 낮아지면 → 도적 이벤트 확률 증가  
		경제가 낮아지면 → 민간인 사망/실종 증가  
		세력 관계가 낮아지면 → 정치 갈등 증가
		
		즉,
		
 		이벤트 → 월드 상태 변화 → 다른 이벤트 확률 상승
		
		이게 자연스러운 연쇄야.
    

## 9) 수치/확률/밸런스(여기까지 있으면 코드가 빨라짐)

- 하루에 정보 몇 개 들어오나
	- ## 1) 정보 10개/일은 많은가?

		### 기준: 하루 4퀘 발행이면, “읽는 정보 수”는 6~8개 정도가 적정
	
		플레이어가 실제로 퀘스트로 쓸 건 4개니까,  
		10개 중 일부는 “버림/보류/아카이브”가 자연스러워야 해.
		
		### 10개가 괜찮아지려면 필요한 장치 4개
		
		1. **자동 요약 1줄 + 태그 추천** (클릭하면 상세)
		    
		2. **우선순위 정렬** (긴급/심각/이벤트 가능성)
		    
		3. **필터** (지역/카테고리/이벤트 후보만 보기)
		    
		4. **미처리 정보는 ‘내일로 넘김’ 또는 ‘시간 지나면 가치 감소’**
		    
		    - “무시”도 전략이 되게
		        
		
		### 추천 수치(체감 밸런스)
		
		- 초반(Day 1~10): 평균 6~8개
		    
		- 중반(Day 11~60): 평균 9~12개 (네가 말한 10개가 여기)
		    
		- 후반(Day 61~100): 평균 8~10개 + 이벤트 위주로 압축
		    
		
	즉, **평균 10개는 중반 기준으로 딱 좋고**, 초반만 조금 줄이는 걸 추천.
    
- 하루에 발행 가능한 퀘스트 수 : 최대 4개
    
- 성공 확률 공식: “등급차 + 정보품질 + 긴급 리스크” 3요소로 끝내자

	너 게임은 납득감이 중요해서, 너무 복잡한 수학보다 **테이블 + 보정**이 최고야.
	
	- ### (A) 기본 확률: “파티 등급 vs 퀘스트 난이도 등급”
	
		등급 차이를 `Δ = partyRank - questRank` (예: C - D = +1)로 두고
		
		|Δ (등급차)|기본 성공확률 p0|
		|---|---|
		|+3 이상|95%|
		|+2|85%|
		|+1|70%|
		|0|55%|
		|-1|40%|
		|-2|25%|
		|-3 이하|10%|
		
		이 테이블만 있어도 체감이 엄청 안정적임.
	
	- ### (B) 신뢰도(credibility) 보정: 낮으면 실패율 증가
	
		신뢰도는 “거짓”이 아니라 “정보의 구체성/확실성”으로 취급하면 딱 맞아.
		
		- `cred` 0~100
		    
		- 보정값 `cAdj = (cred - 60) / 100`
		    
		    - cred 60이면 0
		        
		    - cred 100이면 +0.40
		        
		    - cred 20이면 -0.40
		        
		
		적용은 이렇게:
		
		- `p1 = p0 + cAdj`
		    
		- 단, p는 0.05~0.95로 클램프(최소/최대)
	    
	
	- ### (C) 긴급도(urgency) 리스크: 높을수록 사고/부상 확률↑
	
		긴급도는 성공확률을 너무 많이 깎으면 재미가 없어져서,  
		추천은 **“성공확률은 조금만”** 깎고, 대신 **실패 패널티/부작용 확률**을 올리는 방식.
		
		- 성공확률 보정: `uAdj = -(urgency / 100) * 0.10` (최대 -10%)
		    
		- 대신 “사고 확률” 추가:
		    
		    - `accidentChance = baseAccident + (urgency/100)*0.20`
		        
		    - baseAccident는 0~10% 정도(퀘스트 타입별)
		        
		
		이러면 긴급 퀘스트는 “빨리 처리해야 해서 위험” 느낌이 남.
	
	- ### 최종
	
		- `p = clamp(p0 + cAdj + uAdj, 0.05, 0.95)`
		    
		
	- #### 예시
	
		- 파티 C, 퀘스트 C(Δ=0): p0=55%
		    
		- cred=80 → cAdj=(80-60)/100=+0.20
		    
		- urgency=70 → uAdj=-0.07
		    
		- p=55%+20%-7%=68%
		    
	
	납득감 좋고 계산도 쉬워.
        
- 보상 구조
	- **예산(골드)**
	    
	- **길드 평판** (신뢰 포함)
	    
	- **지역 안정도** (치안+민심 통합)
	    
	- **자원(특수 대응 재료)**
	    
	- **인력**
    
- 페널티 
	- 예산 감소(골드와 동일 축)
	    
	- 민심 하락(=지역 안정도/치안으로 묶어도 됨)
	    
	- 길드 신뢰 하락(=평판과 합침)
    

## 10) 경제/자원(있으면 게임이 더 “게임”이 됨)

- 예산 시스템:
	- ## 🎯 가장 안정적인 구조 (강력 추천)
	
	- ### 💰 돈의 출처는 3가지로 나눠라

	- ## ① 의뢰인 보상금 (Primary Source)
		
		퀘스트 성공 시:
		
		- 의뢰인이 길드에 지급
		    
		- 길드는 그중 일부를 모험가에게 지급
		    
		- 일부는 길드 수수료로 남김
	    
	
		예:
		
		총 보상 1000g  
		모험가 지급 700g  
		길드 수수료 300g
	
		✔ 현실적  
		✔ 수수료율 조정으로 밸런스 가능  
		✔ 길드 운영 느낌 남
	
	- ## ② 후원/세력 지원금 (Stability Source)
	
		- 일정 평판 이상이면
		    
		- 주기적으로 후원금 지급
		    
		
		예:
		
		- 평판 60 이상 → 매 5일 500g
		    
		- 특정 세력과 관계 좋으면 보조금 지급
		    
		
		✔ 경제 파산 방지용 완충 장치  
		✔ 정치 이벤트와 연결 가능
	
	- ## ③ 사건 보상금/벌금 (Dynamic Source)
	
		- 대형 이벤트 해결 → 대규모 보상
		    
		- 실패 → 배상금/벌금 발생
		    
		
		✔ 이벤트의 무게감 증가  
		✔ 엔딩과 자연스럽게 연결
	
	- ## ❌ 비추천
	
		- 길드가 무조건 돈을 찍어내는 구조
			
		- 보상이 그냥 하늘에서 떨어짐
	    
	
	- # 💡 추천 결론
		
		돈은	의뢰인 → 길드 → 모험가
		
		구조로 가고  
		길드는 “수수료”를 먹는 운영자 포지션으로 가는 게 제일 자연스러움.
    
- 인력/모험가 수급: 고용/해고/부상/사망 --> 내부 계산용
	- ### 최소 구성
		- 등급(F~S)
		    
		- 특성 1~2개
		    
		- 신뢰도(길드와의 관계)
    
		- 부상/사망은:
			- 일반 퀘스트 → 낮은 확률
			    
			- 이벤트성 퀘스트 → 의미 있는 리스크
    

	사망이 너무 잦으면 감정 피로가 쌓인다.  
	“부상 → 일정 기간 출전 불가”가 더 좋다.
    
- 자원
	- # 자원 시스템
		
		- ### 길드 자원은 “전략 자원”만 가져가라
		
			예:
			
			- 조사권
			    
			- 정찰권
			    
			- 긴급 대응권
			    
			- 특수 대응 물품 (정화 키트 등)
		    
		
		즉,
		
		모험가는 자기 장비  
		길드는 “행정/지원 능력”
		
		으로 역할 분리.
    
- 업그레이드
	- ## 🎯 추천 업그레이드 5종 (딱 이 정도가 적당)
	
		### ① 조사실 강화
		
		- Info 신뢰도 기본값 +5~+15
			
		- Lead 생성 비용 감소
			
		
		### ② 훈련장
		
		- 파티 등급 계산 시 +보정
			
		
		### ③ 행정실
		
		- 수수료율 +5%
			
		- 후원금 증가
			
		
		### ④ 정보망
		
		- 하루 정보 수 +1~+3
			
		- 이벤트 조기 감지
			
		
		### ⑤ 의료실
		
		- 부상 회복 시간 감소
			
		- 사고 확률 감소
		
	
	이 정도면 충분히 깊고, 과하지도 않음.
    
## 11) 진행/페이싱(100일 구조를 안정화)

- 100일을 3막처럼 나눌까? (1~33, 34~66, 67~100)
    
- 초중반 이벤트 집중 범위(정확한 Day 구간)
    
- 후반에는 뭐가 어려워지나? (정보 혼탁, 대형 사건, 압박)
    
- 루프 반복이 지루해지지 않게 하는 “변주” 요소
    

## 📘 12) 엔딩 설계 (최종 정리본)

### 1️⃣ 엔딩 개수

### 🎯 초기 출시 기준

- Good: 2개
    
- Neutral: 2개
    
- Bad: 2개
    
- Hidden: 1개
    
- Default(분기 없음): 1개
    

➡ 총 8개

초기 버전으로 충분함.  
확장은 업데이트로 추가 가능.

---

### 2️⃣ 엔딩 결정 방식

### ✅ 혼합형 + 우선순위 규칙

단, “세계 점수 평가”가 아니라 **플레이어 선택 평가 중심**

---

### 🔥 엔딩 계산 순서

### 1단계: 즉시 게임오버 체크 (중간 탈락형)

다음 조건 충족 시 즉시 종료:

- 길드 평판 = 0 → 아무도 찾지 않는 길드
    
- 예산 ≤ -1000 → 파산
    
- 특정 대형 이벤트가 파국 단계 도달 + 조건 충족
    

이 단계는 최우선 적용.

---

### 2단계: 특수 플래그 체크 (루트 고정형)

다음은 점수 무시하고 우선 적용:

- 어둠의 조직 계약 → 어둠 루트 엔딩
    
- 대형 역병 은폐 성공 → 몰락 엔딩
    
- 정치 세력 장악 성공 → 권력 엔딩
    
- 특정 종족/세력 루트 완결 → 해당 루트 엔딩
    

➡ 이 단계는 “선택 루트” 평가

---

### 3단계: 선택 성향 기반 분기 (100일 도달 시)

엔딩은 단순 점수 평균이 아니라  
**선택 축(플레이 스타일) 기반으로 분기**

---

### 🎯 선택 축 (내부 추적 수치, UI에 노출하지 않음)

### ① 윤리성 (Integrity)

- 정보 왜곡 누적 시 감소
    
- 진실 유지 시 증가
    

### ② 안정 지향 (Stability)

- 안전 위주 선택 시 증가
    
- 고위험 선택 시 감소
    

### ③ 권력 성향 (Alignment)

- 특정 세력 편들기 시 증가
    
- 중립 유지 시 낮음
    

### ④ 실용주의 (Pragmatism)

- 예산/성과 위주 선택 시 증가
    
- 인명/안정 우선 시 감소
    

---

### 🎮 100일 도달 시 기본 분기 예시

### Good 1 – 정의로운 길드

- 윤리성 높음
    
- 안정 지향 높음
    

### Good 2 – 질서 수호 길드

- 안정 지향 높음
    
- 평판/지역 안정도 높음
    

### Neutral 1 – 평범한 길드

- 모든 축 평균 근처
    

### Neutral 2 – 불안하지만 유지

- 안정 낮지만 붕괴 아님
    

### Bad 1 – 지역 몰락

- 지역 안정도 낮음
    
- 실패 이벤트 누적
    

### Bad 2 – 부패한 길드

- 윤리성 낮음
    
- 실용주의 높음
    

### Hidden – 어둠 계약 루트

- 특정 플래그 + 왜곡 축 충족
    

### Default – 분기 미충족

- 극단적 선택 없이 평균 유지
    

---

### 3️⃣ 핵심 지표 (5개 이하 유지)

최종 확정 지표/축:
- 지표 (World State)
    1. 길드 평판
	    
	2. 지역 안정도 (치안+민심 통합)
	    
	3. 예산
	    
	4. 세력 관계
	    
	5. 인명 피해 지수 (누적 사망/실종)
        
- 선택 축 (Hidden Axis)
    - Integrity
        
    - Stability
        
    - Alignment
		
	- Pragmatism

※ 사건 해결률은 “지역 안정도”에 간접 반영

---

### 4️⃣ 배드엔딩 구조

### 🔹 즉시 종료형 (1~2개)

- 평판 0
    
- 파산
    
- 대형 사건 파국
    

### 🔹 100일 도달형

- 지역 붕괴
    
- 이벤트 별 배드루트 생성 -> 엔딩 유형 분류 (지역 붕괴형/부패형/권력형 등등) -> 카테고리화
    

배드엔딩은 반드시  
“왜 그렇게 되었는지” 결과 화면에 명확히 보여줌.

---

### 5️⃣ 왜곡(정보 편집) 관련 수정 반영

- 왜곡은 하나의 합법적 루트
    
- 왜곡 누적 시 안정성 감소
    
- 일정 수치 이상이면 어둠 이벤트 보장 등장
    
- 어둠 계약 시 즉시 배드엔딩 회피
    
- 대신 일부 Good 엔딩 봉쇄
    

왜곡은 리스크이자 선택지이며  
도덕 점수 시스템이 아님.

---

### 📊 구조 요약

엔딩은

1. 즉시 붕괴 체크
    
2. 특수 루트 체크
    
3. 선택 성향 기반 평가
    

순서로 처리한다.

---


## 📘 13) 톤 / 세계관 / 문장 스타일 (최종 설계본)

---

### 🎯 핵심 방향

> 이 게임은 “판타지 전쟁 이야기”가 아니라  
> **판타지 세계에서 책임을 짊어진 행정 판단 이야기**다.

- 메인 감정: **책임감**
    
- 보조 감정: 죄책감 / 무게감 / 생존
    

스토리는 시스템 위에 덧입히되,  
선택의 결과가 감정으로 남도록 설계한다.

---

### 1️⃣ 톤 설계

#### ✅ 기본 톤

##### “절제된 진지 + 약한 블랙유머”

**특징**

- 기본은 진지
    
- 감정 과잉 금지
    
- 과도하게 어둡지 않음
    
- 세계는 판타지지만 현실적인 행정 문제 중심
    
- 정치 드라마가 아니라 “판타지 행정풍”
    

---

#### 예시 톤

> “북부 숲에서 실종이 늘고 있습니다.”  
> “모험가 길드는 이를 단순한 길 잃음으로 분류했습니다. 세 번째 실종 전까지는 말입니다.”

→ 가볍게 풍자하지만 분위기는 유지

---

### 2️⃣ 텍스트 길이 기준

UI 중심 + 판단 게임 특성 유지

|구분|길이|
|---|---|
|일반 정보|1~2줄|
|일반 퀘스트|2~3줄|
|이벤트성 퀘스트|3~5줄|
|엔딩|5~8줄|

#### 원칙

- 설명보다 상황 제시
    
- 묘사보다 선택 강조
    
- 길게 말하지 않는다
    

---

### 3️⃣ 스토리 확장 구조 (중요)

스토리형 히트작을 목표로 하되,  
**지금은 구조만 준비하고 내용은 최소 유지**

이벤트 데이터 구조는 확장 가능해야 한다.

---

#### 이벤트 데이터 구조

eventTitle  
shortDescription  
longDescription (확장용)  
phaseDescriptions[]  
choiceFlavorText[]  
endingNarration

현재는 shortDescription 위주 사용  
longDescription은 나중 확장

---

#### 이벤트 설계 뼈대

각 이벤트는 다음 5요소를 가진다:

1. Theme (주제)
    
2. Core Conflict (핵심 갈등)
    
3. Moral Tension (선택의 긴장)
    
4. Escalation Path (악화 경로)
    
5. Resolution Tone (결말 분위기)
    

예시:

역병 이벤트

- 주제: 책임
    
- 갈등: 공포 vs 진실 공개
    
- 긴장: 은폐하면 안정, 공개하면 혼란
    
- 악화: 사망자 증가
    
- 결말: 희생을 감수한 해결 or 통제된 몰락
    

---

### 4️⃣ 금지 소재 규칙

#### ❌ 금지

- 노골적인 성적 묘사
    
- 신체 훼손의 상세 묘사
    
- 현실 정치 직접 비유
    
- 특정 현실 집단 공격
    
- 고어 중심 연출
    

#### ⭕ 허용

- 상징적 표현
    
- 간접적 공포 묘사
    
- 감정적 긴장
    

예:  
❌ “시체가 난도질되어 있었다”  
⭕ “현장은 끔찍한 흔적만 남아 있었습니다”

---

### 5️⃣ 캐릭터 말투 규칙

---

#### 🧑‍💼 접수원 (플레이어 시점)

- 기록체
    
- 감정 절제
    
- 판단 중심
    
- 분석적
    

표현 예:

> “해당 정보는 신뢰도 62로 분류됩니다.”  
> “위험도는 중간 수준으로 판단됩니다.”

---

#### 🗡 모험가

- 직설적
    
- 감정적
    
- 현장 중심
    
- 약간 과장
    

예:

> “그 숲은 이상해. 그냥 어두운 게 아니라… 숨을 죽이고 있었어.”

---

#### 👑 귀족/상단

- 정중하지만 계산적
    
- 간접 압박
    
- 체면 중시
    

예:

> “길드의 판단을 존중하겠습니다. 다만, 결과는 중요합니다.”

---

#### 🕶 어둠 세력

- 차분
    
- 위협 직접 언급 안 함
    
- 제안형
    

예:

> “당신의 선택에는 무게가 있습니다. 저희는 그 무게를 덜어드릴 수 있습니다.”

---

### 6️⃣ 세계관 깊이 설계

스토리는 “조각 형태”로 제공한다.

- 대형 설정집 없음
    
- 세계관은 암시 중심
    
- 설명보다 단서
    

예:

- “10년 전 전쟁”
    
- “붕괴된 마탑”
    
- “북부의 오래된 조약”
    
- “종족 간 미묘한 불신”
    

설명하지 않는다.  
사건을 통해 자연스럽게 드러난다.

---

### 7️⃣ 메인 감정 축: 책임

이 게임은:

- 영웅 서사가 아님
    
- 정치 드라마도 아님
    
- 미스터리 추리도 아님
    

이 게임은:

> 누군가의 생존과 세계의 안정 사이에서  
> 책임을 선택하는 이야기

왜곡도 선택이다.  
정직도 선택이다.  
안전도 선택이다.  
권력도 선택이다.

결과는 세계가 아니라  
**플레이어의 판단을 평가한다.**

---

### 8️⃣ 스토리 확장 전략

#### 지금

- 텍스트 최소
    
- 구조 완비
    
- 메인 이벤트 2~3개만 깊게
    

#### 이후

- 이벤트 장편화
    
- 선택지 대사 확장
    
- 엔딩 서사 강화
    
- 종족별 관점 추가
    

---

### 🎯 최종 요약

이 게임의 스토리는:

- 짧지만 무게가 있다
    
- 설명하지 않고 암시한다
    
- 시스템 위에 얹힌다
    
- 선택의 책임을 남긴다
    
- 판타지지만 현실적이다
    

---

이제 이 톤은 고정해도 된다.  
이걸 기준으로 앞으로 모든 이벤트/대사/엔딩을 작성하면  
톤이 흔들리지 않는다.

## 14) 콘텐츠 파이프라인(“양산”하려면 필수)

### 🎯 1️⃣ “퀘스트/이벤트는 AI가 작성” — 괜찮은가?

✔ 가능하다  
❗ 단, 반드시 이 구조를 지켜야 한다:

#### 인간이 설계

- 이벤트 타입
    
- 핵심 갈등
    
- 축 영향
    
- 결과 구조
    

#### AI가 작성

- 설명
    
- 대사
    
- 분위기
    
- 디테일
    

이걸 거꾸로 하면 망한다.
    
    
### 🎯 2️⃣ 템플릿 기반을 통해 AI로 완전 생성 — 괜찮은가?

✔ 매우 좋다  
스토리형 게임에서 특히 좋다.

추천 방식:

EventType: 역병  
Tone: 절제된 진지  
Conflict: 은폐 vs 공개  
Length: 4줄

→ AI가 문장 생성
    
### 🎯 3️⃣ 검수 프로세스 — 반드시 필요

AI 100% 자동은 위험하다.

### 생성형 텍스트 허용 범위

- 이벤트 및 퀘스트 설명 문장 생성 허용
    
- 대사 생성 허용
    
- 엔딩 서사 문장 생성 허용
    
- 단, 수치/조건/플래그 생성은 금지
    
- 모든 생성 텍스트는 템플릿 구조 내에서만 허용
### 자동 체크 필요 항목

- 금지어 검사
    
- 텍스트 길이 제한 검사
    
- 톤 규칙 검사
    
- 캐릭터 말투 검사
    
- 수치 포함 여부 검사

### 추천 구조

#### 1단계: AI 초안 생성

#### 2단계: 룰 검사 (자동)

#### 3단계: 최종 승인 (너가 확인 or 샘플 검수)

---

### 🔥 진짜 중요한 조언

스토리형 히트작을 노린다면

> “AI가 많이 썼다”가 아니라  
> “톤이 일관된다”가 중요하다.

그래서:

- 톤 문서 고정
    
- 캐릭터 말투 규칙 고정
    
- 문장 길이 고정
    
- 세계관 단어집 유지
    

이 네 개가 핵심이다.

## 🎯 15) QA / 테스트 기준 (최종 설계안)

---

### 1️⃣ 절대 깨지면 안 되는 불변 조건 (Invariants)

이건 **무조건 코드 레벨에서 강제 검사**해야 한다.

---

#### 🔒 A. 턴/시간 관련

##### ✔ 하루 진행은 정확히 1회만

- Day 증가 시 모든 상태 업데이트 1회만
    
- 중복 처리 금지
    
- 이벤트 발생 체크 1회만
    

테스트:

- Day 증가 시 이벤트 중복 생성 여부 검사
    

---

#### 🔒 B. Info / Quest 관련

##### ✔ 같은 Info로 동일 퀘스트 중복 생성 금지

- Info는 동일 Day에 1회만 퀘스트화 가능
    
- Lead 구조가 있다면 1회 소모
    

테스트:

- 동일 Info ID로 2개 퀘스트 생성 시 예외 발생
    

---

##### ✔ 종료된 이벤트는 다시 시작되지 않음

- Resolved / Catastrophe 상태 이벤트는 재진입 금지
    

---

#### 🔒 C. 이벤트 상태 머신

##### ✔ 이벤트 페이즈 역행 금지

- Dormant → Triggered → Escalating → Critical → (Resolved | Catastrophe)
    
- 뒤로 가지 않음
    
- 단, “완화”는 Escalating → Triggered 까지만 허용 가능 (설계에 따라)
    

테스트:

- 페이즈 값 감소 시 assert
    

---

#### 🔒 D. 엔딩 관련

##### ✔ Game Over와 100일 엔딩 동시 발생 금지

##### ✔ 특수 플래그 엔딩은 우선 적용

##### ✔ 하나의 엔딩만 선택

---

### 2️⃣ 로그 / 디버그 화면 — 반드시 필요

스토리형 게임에서 디버그 없으면:

> 분기 버그 = 재현 불가 = 멘탈 붕괴

---

#### 🎛 최소 디버그 패널 항목

##### ✔ 현재 Day

##### ✔ 현재 이벤트 목록 + 페이즈

##### ✔ 핵심 지표 수치

- 평판
    
- 안정도
    
- 예산
    
- 세력 관계
    
- 인명 피해
    

##### ✔ 선택 축 수치 (Integrity 등)

(플레이어에게는 숨기되 디버그에서 표시)

##### ✔ 왜곡 점수

##### ✔ 활성 플래그 목록

---

#### 🔍 추천 기능

- 이벤트 강제 발생 버튼
    
- 특정 페이즈 강제 변경
    
- 수치 직접 수정
    
- 랜덤 seed 표시
    

---

### 3️⃣ 리플레이 재현성 (Seed 고정)

이건 **무조건 YES**.

스토리형 게임에서  
“버그인지 운인지” 구분 못하면 QA 지옥이다.

---

#### 🎯 원칙

- 모든 랜덤은 단일 seed 기반
    
- seed 고정 시 동일 플레이는 동일 결과
    

---

#### 랜덤이 들어가는 요소

- 정보 생성
    
- 이벤트 트리거 확률
    
- 성공 확률 판정
    
- 사고 확률
    
- 이벤트 선택지 랜덤 등장
    

→ 전부 seed 기반

---

#### 🔥 테스트 방식

seed = 12345  
플레이 시뮬레이션 100일  
결과 로그 저장  
  
같은 seed로 재실행  
결과 비교

완전히 동일해야 정상.

---

### 4️⃣ 자동 테스트 필수 항목

---

#### 🎯 A. 100일 완주 시뮬레이션 자동 반복

- 랜덤 seed 100개 돌림
    
- 즉시 종료 비율 체크
    
- 엔딩 분포 체크
    

→ 특정 엔딩만 과도하게 나오면 밸런스 문제

---

#### 🎯 B. 이벤트 무한 악화 테스트

- 일부러 방치
    
- 파국 발생 확인
    
- 중복 발생 여부 확인
    

---

#### 🎯 C. 왜곡 루트 테스트

- 왜곡 100% 플레이
    
- 어둠 이벤트 반드시 등장하는지 확인
    

---

### 5️⃣ 스토리형 히트작을 위한 추가 QA 기준

---

#### ✔ 엔딩 서사 길이 자동 검사

5~8줄 초과 시 경고

#### ✔ 금지어 자동 검사

#### ✔ 캐릭터 말투 규칙 검사

- 귀족이 반말하면 오류
    
- 접수원이 감정 과잉 표현하면 경고
    

---

### 🎯 최종 QA 구조 정리

---

#### 1. Invariants는 코드로 강제

#### 2. 디버그 패널은 필수

#### 3. 모든 랜덤은 seed 기반

#### 4. 자동 시뮬 테스트 필수

#### 5. 텍스트 룰 자동 검사
    

## 📘 16) 파일 / 코드 산출물 기준 (AI 통제용 최종안)

---

### 1️⃣ 파일 단위 — “작게, 명확하게”

#### 🎯 원칙

> 한 번에 1~3 파일만 생성

왜냐하면:

- AI는 파일 많아지면 맥락 꼬임
    
- 수정 요청 시 재생성 폭발
    
- 디버깅 어려움
    

---

#### ✅ 추천 기준

- 신규 기능 → 최대 3파일
    
- 기존 파일 수정 → 1파일
    
- 리팩토링 → 1파일씩
    

---

#### ❌ 금지

- “전체 시스템 다시 작성”
    
- 10파일 이상 생성
    
- 구조 변경 + 기능 추가 동시 수행
    

---

### 2️⃣ 코딩 스타일 — 혼합 금지

AI에게 제일 위험한 게 “스타일 혼합”이야.

---

#### 🎯 추천 스타일 (너 게임 구조 기준)

##### 🔹 상태 중심 모듈 구조 + 함수형 우선

- 상태는 명확한 객체
    
- 로직은 순수 함수
    
- 클래스는 최소화
    
- 상속 구조 금지
    

---

##### 왜?

이 게임은:

- 상태 머신 많음
    
- 이벤트 분기 많음
    
- 테스트 중요
    
- seed 재현성 중요
    

함수형 + 상태 객체 방식이  
테스트/디버그/AI 통제에 최적.

---

### 3️⃣ 주석 허용 여부

#### 🎯 원칙

> 로직 설명 주석은 허용  
> 불필요한 장문 설명 금지

---

#### 허용

- 함수 목적 설명
    
- 불변 조건 설명
    
- 상태 전이 설명
    

---

#### 금지

- 감성 설명
    
- TODO 남발
    
- AI 자기 설명
    

---

### 4️⃣ 테스트 코드 포함 여부

스토리형 히트작 목표면  
테스트는 반드시 포함해야 한다.

---

#### 🎯 기준

- 모든 핵심 로직 파일에는 최소 1 테스트 포함
    
- 이벤트 상태 머신은 반드시 테스트
    
- 성공 확률 함수는 반드시 테스트
    
- 엔딩 계산은 반드시 테스트
    

---

#### 테스트 포함 방식

QuestCalculator.ts  
QuestCalculator.test.ts

---

### 5️⃣ 외부 라이브러리 사용 범위

여기 엄격하게 안 잡으면  
AI가 갑자기 무거운 라이브러리 끌고 온다.

---

#### 🎯 허용 범위

- 난수/seed 라이브러리 (필수)
    
- 유틸 함수 (경량)
    
- 테스트 프레임워크
    

---

#### ❌ 금지

- 상태 관리 프레임워크 추가
    
- 대형 ORM
    
- 무거운 이벤트 버스
    
- 자동 마법 처리 라이브러리
    

---

### 🔥 추가로 꼭 넣어야 할 AI 통제 규칙

AI에게 매번 붙여야 할 것:

- 기존 시그니처 변경 금지  
- 전역 상태 생성 금지  
- 콘솔 로그 남발 금지  
- 랜덤은 반드시 전달받은 seed 사용  
- 예외 처리 누락 금지

---

### 🎮 최종 권장 세팅 요약

|항목|권장|
|---|---|
|파일 수|1~3개 제한|
|스타일|상태 객체 + 순수 함수|
|클래스|최소|
|주석|구조 설명만|
|테스트|핵심 로직 필수|
|외부 라이브러리|최소화|
|랜덤|seed 강제|

---

### 💡 진짜 중요한 한 줄

AI는 “창의적인 개발자”가 아니라  
**통제해야 할 주니어 개발자**라고 생각해라.

규칙이 많을수록 생산성이 오른다.